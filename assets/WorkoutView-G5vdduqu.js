import{d as f,j as $,_ as T,c as w,g as s,a as n,f as a,o as d,R as S,r as _,b as W,e as h,w as c,l as v,h as F,t as b,F as N,P as x,v as B,k as U,i as E,n as C}from"./index-LDKTPl-6.js";import{W as q}from"./WorkoutForm-DXhFjUj9.js";import{V as j}from"./VBreadcrumbs-BwTwL9m8.js";import"./VTextarea-BjpbJAGf.js";const P=f({name:"WeightedExerciseForm",props:{workoutId:{type:Number,required:!0},exercise:{type:Object,default:()=>({exercise_type:"weighted",target_sets:0,target_reps:0,target_weight:0,weight_unit:"kg",rest_period:60})}},setup(e){const{accessToken:t}=$();return{accessToken:t}}}),R={class:"weighted-exercise-form"},V=["value"];function A(e,t,u,l,m,k){const r=a("NTextInput"),i=a("NSelect");return d(),w("div",R,[s(r,{value:e.exercise.name,"onUpdate:value":t[0]||(t[0]=o=>e.exercise.name=o),name:"name",label:"Exercise Name",required:""},null,8,["value"]),s(r,{value:e.exercise.target_sets,"onUpdate:value":t[1]||(t[1]=o=>e.exercise.target_sets=o),name:"target_sets",label:"Target Sets",type:"number",required:""},null,8,["value"]),s(r,{value:e.exercise.target_reps,"onUpdate:value":t[2]||(t[2]=o=>e.exercise.target_reps=o),name:"target_reps",label:"Target Reps",type:"number",required:""},null,8,["value"]),s(r,{value:e.exercise.target_weight,"onUpdate:value":t[3]||(t[3]=o=>e.exercise.target_weight=o),name:"target_weight",label:"Target Weight",type:"number",required:""},null,8,["value"]),s(i,{value:e.exercise.weight_unit,"onUpdate:value":t[4]||(t[4]=o=>e.exercise.weight_unit=o),name:"weight_unit",label:"Weight Unit",options:[{value:"kg",label:"Kilograms"},{value:"lbs",label:"Pounds"}],required:""},null,8,["value"]),s(r,{value:e.exercise.rest_period,"onUpdate:value":t[5]||(t[5]=o=>e.exercise.rest_period=o),name:"rest_period",label:"Rest Period (seconds)",type:"number",required:""},null,8,["value"]),n("input",{type:"hidden",name:"workout_id",value:e.workoutId},null,8,V),t[6]||(t[6]=n("input",{type:"hidden",name:"exercise_type",value:"weighted"},null,-1))])}const D=T(P,[["render",A],["__scopeId","data-v-43b4803b"]]),O=f({name:"TimedExerciseForm",props:{workoutId:{type:Number,required:!0},exercise:{type:Object,default:()=>({exercise_type:"timed",target_duration:0,target_distance:0,distance_unit:"km",rest_period:60})}},setup(e){const{accessToken:t}=$();return{accessToken:t}}}),z={class:"timed-exercise-form"},H=["value"];function M(e,t,u,l,m,k){const r=a("NTextInput"),i=a("NSelect");return d(),w("div",z,[s(r,{value:e.exercise.name,"onUpdate:value":t[0]||(t[0]=o=>e.exercise.name=o),name:"name",label:"Exercise Name",required:""},null,8,["value"]),s(r,{value:e.exercise.target_duration,"onUpdate:value":t[1]||(t[1]=o=>e.exercise.target_duration=o),name:"target_duration",label:"Target Duration (seconds)",type:"number",required:""},null,8,["value"]),s(r,{value:e.exercise.target_distance,"onUpdate:value":t[2]||(t[2]=o=>e.exercise.target_distance=o),name:"target_distance",label:"Target Distance",type:"number"},null,8,["value"]),s(i,{value:e.exercise.distance_unit,"onUpdate:value":t[3]||(t[3]=o=>e.exercise.distance_unit=o),name:"distance_unit",label:"Distance Unit",options:[{value:"km",label:"Kilometers"},{value:"m",label:"Meters"},{value:"mi",label:"Miles"}]},null,8,["value"]),s(r,{value:e.exercise.rest_period,"onUpdate:value":t[4]||(t[4]=o=>e.exercise.rest_period=o),name:"rest_period",label:"Rest Period (seconds)",type:"number",required:""},null,8,["value"]),n("input",{type:"hidden",name:"workout_id",value:e.workoutId},null,8,H),t[5]||(t[5]=n("input",{type:"hidden",name:"exercise_type",value:"timed"},null,-1))])}const K=T(O,[["render",M],["__scopeId","data-v-504edebb"]]),J=f({name:"WorkoutItemForm",components:{RecordForm:S,WeightedExerciseForm:D,TimedExerciseForm:K},props:{workoutId:{type:Number,required:!0}},setup(e){const{accessToken:t}=$(),u=_("weighted"),l=_({name:"",exercise_type:"weighted",target_sets:0,target_reps:0,target_weight:0,weight_unit:"kg",rest_period:60}),m=o=>{u.value=o,o==="weighted"?l.value={name:"",exercise_type:"weighted",target_sets:0,target_reps:0,target_weight:0,weight_unit:"kg",rest_period:60}:l.value={name:"",exercise_type:"timed",target_duration:0,target_distance:0,distance_unit:"km",rest_period:60}},k=W(()=>"https://api.rigelsystems.co.uk/daily_discipline/workout_items"),r=W(()=>"POST");return{accessToken:t,exerciseType:u,exercise:l,handleExerciseTypeChange:m,handleSave:async o=>{window.location.reload()},endpoint:k,method:r}}}),G={class:"workout-item-form"};function L(e,t,u,l,m,k){const r=a("NButton"),i=a("NSelect"),o=a("WeightedExerciseForm"),g=a("TimedExerciseForm"),I=a("RecordForm");return d(),h(I,{record:e.exercise,endpoint:e.endpoint,method:e.method,onSave:e.handleSave},{trigger:c(({openDialog:p})=>[F(e.$slots,"trigger",{openDialog:p},()=>[s(r,{label:"Add Exercise"})],!0)]),title:c(()=>t[1]||(t[1]=[n("span",null,"Add New Exercise",-1)])),form:c(({record:p})=>[n("div",G,[s(i,{value:e.exerciseType,"onUpdate:value":[t[0]||(t[0]=y=>e.exerciseType=y),e.handleExerciseTypeChange],label:"Exercise Type",options:[{value:"weighted",label:"Weighted Exercise"},{value:"timed",label:"Timed Exercise"}]},null,8,["value","onUpdate:value"]),e.exerciseType==="weighted"?(d(),h(o,{key:0,workoutId:e.workoutId,exercise:p,onSave:e.handleSave},null,8,["workoutId","exercise","onSave"])):v("",!0),e.exerciseType==="timed"?(d(),h(g,{key:1,workoutId:e.workoutId,exercise:p,onSave:e.handleSave},null,8,["workoutId","exercise","onSave"])):v("",!0)])]),_:3},8,["record","endpoint","method","onSave"])}const Q=T(J,[["render",L],["__scopeId","data-v-049a6b71"]]),X=f({name:"WorkoutItem",props:{workoutItem:{type:Object,required:!0}},setup(e){const{accessToken:t}=$(),u=_(!1),l=W(()=>e.workoutItem.exercise_type==="weighted"),m=W(()=>e.workoutItem.exercise_type==="timed");return{loading:u,updateWorkoutItem:async r=>{u.value=!0;try{const i=await fetch(`https://api.rigelsystems.co.uk/daily_discipline/workout_items/${e.workoutItem.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.value}`},body:JSON.stringify(r)});if(!i.ok)throw new Error("Failed to update workout item");return await i.json()}catch(i){throw console.error("Error updating workout item:",i),i}finally{u.value=!1}},isWeightedExercise:l,isTimedExercise:m}}}),Y={class:"workout-item-content"},Z={class:"workout-metric"},ee={key:0,class:"workout-metric"},te={key:0,class:"workout-metric"},oe={key:1,class:"workout-metric"},re={key:0,class:"workout-metric"};function se(e,t,u,l,m,k){const r=a("NTextInput"),i=a("NCard");return d(),h(i,{title:e.workoutItem.name},{content:c(()=>[n("div",Y,[n("div",Z,[t[8]||(t[8]=n("label",null,"Exercise Type:",-1)),n("span",null,b(e.workoutItem.exercise_type==="weighted"?"Weighted":"Timed"),1)]),e.workoutItem.target_sets?(d(),w("div",ee,[t[9]||(t[9]=n("label",null,"Sets:",-1)),s(r,{value:e.workoutItem.sets_completed,"onUpdate:value":[t[0]||(t[0]=o=>e.workoutItem.sets_completed=o),t[1]||(t[1]=o=>e.updateWorkoutItem({sets_completed:o}))],type:"number",min:0,max:e.workoutItem.target_sets},null,8,["value","max"]),n("span",null,"/ "+b(e.workoutItem.target_sets),1)])):v("",!0),e.isWeightedExercise?(d(),w(N,{key:1},[e.workoutItem.target_reps?(d(),w("div",te,[t[10]||(t[10]=n("label",null,"Reps:",-1)),s(r,{value:e.workoutItem.reps_completed,"onUpdate:value":[t[2]||(t[2]=o=>e.workoutItem.reps_completed=o),t[3]||(t[3]=o=>e.updateWorkoutItem({reps_completed:o}))],type:"number",min:0,max:e.workoutItem.target_reps},null,8,["value","max"]),n("span",null,"/ "+b(e.workoutItem.target_reps),1)])):v("",!0),e.workoutItem.target_weight?(d(),w("div",oe,[t[11]||(t[11]=n("label",null,"Weight (lbs):",-1)),s(r,{value:e.workoutItem.weight_completed,"onUpdate:value":[t[4]||(t[4]=o=>e.workoutItem.weight_completed=o),t[5]||(t[5]=o=>e.updateWorkoutItem({weight_completed:o}))],type:"number",min:0},null,8,["value"]),n("span",null,"/ "+b(e.workoutItem.target_weight),1)])):v("",!0)],64)):v("",!0),e.isTimedExercise?(d(),w(N,{key:2},[e.workoutItem.target_duration?(d(),w("div",re,[t[12]||(t[12]=n("label",null,"Duration (s):",-1)),s(r,{value:e.workoutItem.duration_completed,"onUpdate:value":[t[6]||(t[6]=o=>e.workoutItem.duration_completed=o),t[7]||(t[7]=o=>e.updateWorkoutItem({duration_completed:o}))],type:"number",min:0,max:e.workoutItem.target_duration},null,8,["value","max"]),n("span",null,"/ "+b(e.workoutItem.target_duration),1)])):v("",!0)],64)):v("",!0)])]),_:1},8,["title"])}const ne=T(X,[["render",se],["__scopeId","data-v-98c53e4f"]]),ie=f({name:"WorkoutView",components:{PageHeader:x,WorkoutForm:q,WorkoutItemForm:Q,WorkoutItem:ne},setup(){const{accessToken:e}=$(),t=_({name:"",description:"",status:"",checklist_items:[]}),u=_(null),l=_(!0),m=_([{title:"Workouts",disabled:!1,href:"/#/workouts"}]),k=B(),r=_(k.params.id);U(()=>k.params.id,g=>{r.value=g});const i=async()=>{const g=`https://api.rigelsystems.co.uk/daily_discipline/checklists/${r.value}`,I=await fetch(g,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.value}`}});if(I.ok){l.value=!1;const p=await I.json();t.value=p,m.value.push({title:p.name,disabled:!0,href:`/workouts/${r}`})}else{l.value=!1;const p=await I.json();u.value=p.error}};return U(e,g=>{g&&i()},{immediate:!0}),{workout:t,breadcrumbs:m,workoutItemBulkUpdateUrl:"https://api.rigelsystems.co.uk/daily_discipline/checklist_items/bulk_update",accessToken:e,errorMessage:u,loading:l}}}),ae={class:"page-header"},ue={class:"p-1"};function le(e,t,u,l,m,k){const r=a("PageHeader"),i=a("n-button"),o=a("WorkoutForm"),g=a("WorkoutItem"),I=a("n-order-list"),p=a("WorkoutItemForm");return d(),w(N,null,[n("div",ae,[s(r,{title:e.workout.name},null,8,["title"]),s(o,{workout:e.workout},{trigger:c(({openDialog:y})=>[s(i,{onClick:y},{default:c(()=>t[0]||(t[0]=[E("Edit Workout")])),_:2},1032,["onClick"])]),_:1},8,["workout"]),s(j,{items:e.breadcrumbs},{prepend:c(()=>[s(C,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),n("div",ue,[s(I,{items:e.workout.checklist_items,updateUrl:e.workoutItemBulkUpdateUrl,accessToken:e.accessToken,loading:e.loading,modelName:"workout_items"},{default:c(y=>[s(g,{workoutItem:y},null,8,["workoutItem"])]),_:1},8,["items","updateUrl","accessToken","loading"])]),s(p,{workoutId:e.workoutId},{trigger:c(({openDialog:y})=>[s(i,{class:"m-1",onClick:y},{default:c(()=>t[1]||(t[1]=[E("New Exercise")])),_:2},1032,["onClick"])]),_:1},8,["workoutId"])],64)}const ce=T(ie,[["render",le]]);export{ce as default};
