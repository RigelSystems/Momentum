import{d as x,P as B,x as F,r as v,y as M,k as P,s as V,_ as S,c,a as l,g as r,f as p,w as h,z as Y,F as _,m as y,o as s,p as A,l as g,e as m,t as f}from"./index-CH7hzNg4.js";import{H as R,r as z}from"./requestApi-DxJNpz8W.js";import{H as I,g as E}from"./HabitEntry-DIdMrqE5.js";const L=x({name:"HabitView",components:{PageHeader:B,HabitEntry:I,Habit:R},setup(){const o=E(365,"YYYY-MM-DD"),$=E(365,"ddd<br>D"),{getAccessTokenSilently:D,user:N}=F(),T=v(null),w=v(null),H=v(!0),i=v([{title:"Habits",disabled:!1,href:"/#/habits"}]),d=v({}),u=M(),k=v(u.params.id);P(()=>u.params.id,a=>{k.value=a}),V(async()=>{const a=`https://api.fordsdevelopment.co.uk/daily_discipline/habits/${k.value}`,t=z(a,"GET");try{const e=await t();console.log("Habit data:",e),d.value=e,console.log(e),i.value.push({title:e.name,disabled:!0,href:`/habits/${k}`})}catch{w.value="Failed to fetch records"}H.value=!1});const C=(a,t)=>a.habit_entries.find(e=>e.date===t),n=async()=>{T.value=await D()};return V(async()=>{await n()}),{habit:d,breadcrumbs:i,lastSevenDays:o,lastSevenDaysNice:$,getHabitEntiryForDate:C,accessToken:T}}}),q={class:"page-header"},G={class:"standard-container-3"},U={class:"standard-container-3"},X={class:"standard-container-3"},j={class:"standard-container-3"},J={class:"habit-yearly-container"};function K(o,$,D,N,T,w){const H=p("PageHeader"),i=p("n-tab"),d=p("NDashboardTile"),u=p("n-tab-panel"),k=p("n-tabs"),C=p("HabitEntry");return s(),c(_,null,[l("div",q,[r(H,{title:o.habit.name},null,8,["title"]),r(Y,{items:o.breadcrumbs},{prepend:h(()=>[r(A,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),r(k,null,{tabs:h(({activeTab:n,setActiveTab:a})=>[r(i,{label:"Totals",active:n===0,onClick:t=>a(0)},null,8,["active","onClick"]),r(i,{label:"Averages",active:n===1,onClick:t=>a(1)},null,8,["active","onClick"]),r(i,{label:"Changes",active:n===2,onClick:t=>a(2)},null,8,["active","onClick"]),r(i,{label:"Records",active:n===3,onClick:t=>a(3)},null,8,["active","onClick"])]),default:h(({activeTab:n})=>[r(u,{index:0,activeTab:n},{default:h(()=>{var a,t;return[l("div",G,[((t=(a=o.habit)==null?void 0:a.dashboard_data_totals)==null?void 0:t.length)>0?(s(!0),c(_,{key:0},y(o.habit.dashboard_data_totals,(e,b)=>(s(),m(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:1,activeTab:n},{default:h(()=>{var a,t;return[l("div",U,[((t=(a=o.habit)==null?void 0:a.dashboard_data_averages)==null?void 0:t.length)>0?(s(!0),c(_,{key:0},y(o.habit.dashboard_data_averages,(e,b)=>(s(),m(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:2,activeTab:n},{default:h(()=>{var a,t;return[l("div",X,[((t=(a=o.habit)==null?void 0:a.dashboard_data_changes)==null?void 0:t.length)>0?(s(!0),c(_,{key:0},y(o.habit.dashboard_data_changes,(e,b)=>(s(),m(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:3,activeTab:n},{default:h(()=>{var a,t;return[l("div",j,[((t=(a=o.habit)==null?void 0:a.dashboard_data_records)==null?void 0:t.length)>0?(s(!0),c(_,{key:0},y(o.habit.dashboard_data_records,(e,b)=>(s(),m(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"])]),_:1}),l("div",null,[(s(!0),c(_,null,y(o.habit.monthly_data,n=>(s(),c("div",{key:n.month},[l("div",null,[l("h4",null,f(n.month),1),l("div",J,[(s(!0),c(_,null,y(n.entries,a=>(s(),c("div",{class:"habit-yearly-wrapper",key:a.id},[o.accessToken?(s(),m(C,{key:0,entry:a.entry,habit:o.habit,date:a.date,colour:o.habit.colour,fetchHabits:o.fetchHabits,accessToken:o.accessToken},null,8,["entry","habit","date","colour","fetchHabits","accessToken"])):g("",!0)]))),128))]),l("p",null,"Total: "+f(n.total_entries),1),l("p",null,"Daily Average: "+f(n.daily_average),1),l("p",null,"Monthly Average: "+f(n.monthly_average),1)])]))),128))])],64)}const Z=S(L,[["render",K]]);export{Z as default};
