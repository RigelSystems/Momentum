import{d as g,P as v,j as y,r as o,k as B,b as m,_ as T,c as w,a as _,g as u,f as n,w as f,e as N,l as $,F,o as C,i as U}from"./index-BGU5o5H4.js";import{C as V}from"./ChecklistForm-BkK1qUFp.js";import"./VTextarea-rbibiCQe.js";const b=g({name:"ChecklistsView",components:{PageHeader:v,ChecklistForm:V},setup(){const{accessToken:e}=y(),s=o(!0),c=o([]),i=o(null),h=o(null),r=async()=>{const t=await fetch("https://api.rigelsystems.co.uk/daily_discipline/checklists",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.value}`}});if(t.ok){const k=await t.json();c.value=k,s.value=!1}else{const k=await t.json();i.value=k.error,s.value=!1}};B(e,a=>{a&&r()},{immediate:!0});const l=()=>{r()},d=m(()=>"https://api.rigelsystems.co.uk/daily_discipline/checklists/bulk_update"),p=m(()=>"https://api.rigelsystems.co.uk/daily_discipline/checklists");return{checklists:c,loading:s,errorMessage:i,handleTaskSaved:l,checklistBulkUpdateUrl:d,accessToken:e,checklistUrl:p,dataGrid:h}}}),S={class:"standard-container p-1"},j={class:"standard-container p-1"};function G(e,s,c,i,h,r){const l=n("PageHeader"),d=n("NButton"),p=n("ChecklistForm"),a=n("NDataGrid");return C(),w(F,null,[_("div",S,[u(l,{title:"Checklists"}),u(p,{onSave:e.handleTaskSaved},{trigger:f(({openDialog:t})=>[u(d,{onClick:t},{default:f(()=>s[0]||(s[0]=[U("New Checklist")])),_:2},1032,["onClick"])]),_:1},8,["onSave"])]),_("div",j,[e.accessToken?(C(),N(a,{key:0,ref:"dataGrid",url:e.checklistUrl,accessToken:e.accessToken,pageSize:10,search:!0,sortable:!0,searchableFields:["name"],sortableFields:["name"]},null,8,["url","accessToken"])):$("",!0)])],64)}const A=T(b,[["render",G]]);export{A as default};
