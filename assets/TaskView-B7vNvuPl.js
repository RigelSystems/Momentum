import{d as f,_ as I,c as v,e as y,z as B,o as _,P as w,j as U,r as u,x as F,k as C,a as T,g as s,f as n,w as i,F as V,i as g,p as j}from"./index-D0Qmzza5.js";import{T as E}from"./TaskForm-Bk3-nAcB.js";import{C as N,a as P,b}from"./ChecklistItemTask-DxJEDTtZ.js";import{V as z}from"./VBreadcrumbs-DQSC7GzD.js";import"./VTextarea-BlzolVWn.js";import"./SelectIcon-CVMxzz4l.js";const H=f({name:"ChecklistItemTimedExercise",props:{checklistItem:{type:Object,required:!0}}});function q(e,t,r,o,l,m){return" Timed checklist item component "}const x=I(H,[["render",q]]),A=f({name:"ChecklistItem",props:{checklistItem:{type:Object,required:!0}},components:{ChecklistItemForm:b,ChecklistItemWeightedExercise:P,ChecklistItemTimedExercise:x,ChecklistItemTask:N}});function O(e,t,r,o,l,m){return _(),v("div",null,[(_(),y(B(`ChecklistItem${e.checklistItem.checklist_item_type_classify}`),{checklistItem:e.checklistItem},null,8,["checklistItem"]))])}const D=I(A,[["render",O]]),M=f({name:"TaskView",components:{PageHeader:w,TaskForm:E,ChecklistItemForm:b,ChecklistItem:D},setup(){const{accessToken:e}=U(),t=u({name:"",description:"",status:"",checklist_items:[]}),r=u(null),o=u(!0),l=u([{title:"Tasks",disabled:!1,href:"/#/tasks"}]),m=F(),d=u(m.params.id);C(()=>m.params.id,a=>{d.value=a});const h=async()=>{const a=`https://api.fordsdevelopment.co.uk/daily_discipline/checklists/${d.value}`,p=await fetch(a,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.value}`}});if(p.ok){o.value=!1;const c=await p.json();t.value=c,l.value.push({title:c.name,disabled:!0,href:`/tasks/${d}`})}else{o.value=!1;const c=await p.json();r.value=c.error}};return C(e,a=>{a&&h()},{immediate:!0}),{task:t,breadcrumbs:l,checklistItemBulkUpdateUrl:"https://api.fordsdevelopment.co.uk/daily_discipline/checklist_items/bulk_update",accessToken:e,errorMessage:r,loading:o}}}),R={class:"page-header"},W={class:"p-1"};function G(e,t,r,o,l,m){const d=n("PageHeader"),h=n("n-button"),$=n("TaskForm"),a=n("ChecklistItem"),p=n("n-order-list"),c=n("ChecklistItemForm");return _(),v(V,null,[T("div",R,[s(d,{title:e.task.name},null,8,["title"]),s($,{task:e.task},{trigger:i(({openDialog:k})=>[s(h,{onClick:k},{default:i(()=>t[0]||(t[0]=[g("Edit Task")])),_:2},1032,["onClick"])]),_:1},8,["task"]),s(z,{items:e.breadcrumbs},{prepend:i(()=>[s(j,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),T("div",W,[s(p,{items:e.task.checklist_items,updateUrl:e.checklistItemBulkUpdateUrl,accessToken:e.accessToken,loading:e.loading,modelName:"checklist_items"},{default:i(k=>[s(a,{checklistItem:k},null,8,["checklistItem"])]),_:1},8,["items","updateUrl","accessToken","loading"])]),s(c,null,{trigger:i(({openDialog:k})=>[s(h,{class:"m-1",onClick:k},{default:i(()=>t[1]||(t[1]=[g("New Task Item")])),_:2},1032,["onClick"])]),_:1})],64)}const Y=I(M,[["render",G]]);export{Y as default};
