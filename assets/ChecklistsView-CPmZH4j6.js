import{d as h,aR as C,P as g,k as v,r as c,l as w,_ as y,c as T,a as f,f as t,w as l,p as B,g as i,t as N,j as V,o as $}from"./index-BSkj9F-8.js";const U=h({name:"ChecklistsView",components:{PageHeader:g,ChecklistForm:C},setup(){const{getAccessTokenSilently:s,user:r}=v(),o=c(null),a=c([]),k=c(null),n=c(!0),d=async()=>{const e=await fetch("https://api.fordsdevelopment.co.uk/daily_discipline/checklists",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.value}`}});if(e.ok){n.value=!1;const m=await e.json();a.value=m,console.log(a.value)}else{n.value=!1;const m=await e.json();k.value=m.error}},p=async()=>{o.value=await s()},u="https://api.fordsdevelopment.co.uk/daily_discipline/checklists/bulk_update";return w(async()=>{await p(),d()}),{checklists:a,loading:n,accessToken:o,updateUrl:u}}}),b={class:"page-wrapper"},j={class:"mb-5 d-flex justify-space-start"};function x(s,r,o,a,k,n){const d=i("ChecklistForm"),p=i("RouterLink"),u=i("NCard"),_=i("n-order-list");return $(),T("div",b,[f("div",j,[t(d,null,{trigger:l(({openDialog:e})=>[t(B,{density:"comfortable",variant:"tonal",text:"New Checklist",class:"mr-2",onClick:e},null,8,["onClick"])]),_:1})]),t(_,{items:s.checklists,updateUrl:s.updateUrl,loading:s.loading,accessToken:s.accessToken,modelName:"checklists"},{default:l(e=>[t(u,{subtitle:e.status,title:e.name},{content:l(()=>[f("p",null,N(e.description),1),t(p,{to:{name:"checklist",params:{id:e.id}},class:"mr-2"},{default:l(()=>r[0]||(r[0]=[V(" View ")])),_:2},1032,["to"])]),_:2},1032,["subtitle","title"])]),_:1},8,["items","updateUrl","loading","accessToken"])])}const F=y(U,[["render",x]]);export{F as default};
