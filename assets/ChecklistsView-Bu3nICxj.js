import{d as h,ac as C,P as g,x as v,r as c,s as w,_ as y,c as T,a as f,g as t,w as l,f as i,o as B,q as N,t as V,i as $}from"./index-Qcscy6Fn.js";const U=h({name:"ChecklistsView",components:{PageHeader:g,ChecklistForm:C},setup(){const{getAccessTokenSilently:s,user:r}=v(),o=c(null),a=c([]),k=c(null),n=c(!0),d=async()=>{const e=await fetch("https://api.fordsdevelopment.co.uk/daily_discipline/checklists",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.value}`}});if(e.ok){n.value=!1;const m=await e.json();a.value=m,console.log(a.value)}else{n.value=!1;const m=await e.json();k.value=m.error}},p=async()=>{o.value=await s()},u="https://api.fordsdevelopment.co.uk/daily_discipline/checklists/bulk_update";return w(async()=>{await p(),d()}),{checklists:a,loading:n,accessToken:o,updateUrl:u}}}),j={class:"page-wrapper"},x={class:"mb-5 d-flex justify-space-start"};function b(s,r,o,a,k,n){const d=i("ChecklistForm"),p=i("RouterLink"),u=i("NCard"),_=i("n-order-list");return B(),T("div",j,[f("div",x,[t(d,null,{trigger:l(({openDialog:e})=>[t(N,{density:"comfortable",variant:"tonal",text:"New Checklist",class:"mr-2",onClick:e},null,8,["onClick"])]),_:1})]),t(_,{items:s.checklists,updateUrl:s.updateUrl,loading:s.loading,accessToken:s.accessToken,modelName:"checklists"},{default:l(e=>[t(u,{title:e.name},{content:l(()=>[f("p",null,V(e.description),1),t(p,{to:{name:"checklist",params:{id:e.id}},class:"mr-2"},{default:l(()=>r[0]||(r[0]=[$(" View ")])),_:2},1032,["to"])]),_:2},1032,["title"])]),_:1},8,["items","updateUrl","loading","accessToken"])])}const F=y(U,[["render",b]]);export{F as default};
