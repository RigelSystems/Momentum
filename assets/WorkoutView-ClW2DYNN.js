import{d as $,R as N,j as h,r as w,_ as W,e as T,w as m,f as d,o as v,g as n,V as C,a as i,h as F,i as y,c as _,l as f,t as b,P as B,x as S,k as U,F as V,p as R}from"./index-D0Qmzza5.js";import{W as j}from"./WorkoutForm-_deeyZac.js";import{V as E}from"./VBreadcrumbs-DQSC7GzD.js";import"./VTextarea-BlzolVWn.js";const P=$({name:"WorkoutItemForm",props:{checklistId:{type:[String,Number],required:!0}},components:{RecordForm:N},setup(e){const{accessToken:t}=h();return{workoutItem:w({name:"",checklist_id:Number(e.checklistId),target_sets:0,target_reps:0,target_duration:0,target_weight:0}),endpoint:"https://api.fordsdevelopment.co.uk/daily_discipline/checklist_items",method:"POST",handleSave:async a=>{window.location.reload()},accessToken:t}}});function A(e,t,p,k,c,u){const a=d("n-button"),l=d("NTextInput"),r=d("RecordForm");return v(),T(r,{record:e.workoutItem,endpoint:e.endpoint,method:e.method,onSave:e.handleSave},{trigger:m(({openDialog:o})=>[F(e.$slots,"trigger",{openDialog:o},()=>[n(a,{onClick:o},{default:m(()=>t[0]||(t[0]=[y("Add Workout Item")])),_:2},1032,["onClick"])])]),title:m(()=>t[1]||(t[1]=[i("span",null,"Add New Workout Item",-1)])),form:m(({record:o})=>[n(C,null,{default:m(()=>[n(l,{value:o.name,"onUpdate:value":s=>o.name=s,label:"Exercise Name"},null,8,["value","onUpdate:value"]),n(l,{value:o.target_sets,"onUpdate:value":s=>o.target_sets=s,label:"Target Sets",type:"number"},null,8,["value","onUpdate:value"]),n(l,{value:o.target_reps,"onUpdate:value":s=>o.target_reps=s,label:"Target Reps",type:"number"},null,8,["value","onUpdate:value"]),n(l,{value:o.target_duration,"onUpdate:value":s=>o.target_duration=s,label:"Target Duration (seconds)",type:"number"},null,8,["value","onUpdate:value"]),n(l,{value:o.target_weight,"onUpdate:value":s=>o.target_weight=s,label:"Target Weight (lbs)",type:"number"},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:3},8,["record","endpoint","method","onSave"])}const z=W(P,[["render",A]]),H=$({name:"WorkoutItem",props:{workoutItem:{type:Object,required:!0}},setup(e){const{accessToken:t}=h(),p=w(!1);return{loading:p,updateWorkoutItem:async c=>{p.value=!0;try{const u=await fetch(`https://api.fordsdevelopment.co.uk/daily_discipline/checklist_items/${e.workoutItem.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.value}`},body:JSON.stringify(c)});if(!u.ok)throw new Error("Failed to update workout item");return await u.json()}catch(u){throw console.error("Error updating workout item:",u),u}finally{p.value=!1}}}}}),O={class:"workout-item-content"},q={key:0,class:"workout-metric"},D={key:1,class:"workout-metric"},J={key:2,class:"workout-metric"},M={key:3,class:"workout-metric"};function G(e,t,p,k,c,u){const a=d("NTextInput"),l=d("NCard");return v(),T(l,{title:e.workoutItem.name},{content:m(()=>[i("div",O,[e.workoutItem.target_sets?(v(),_("div",q,[t[8]||(t[8]=i("label",null,"Sets:",-1)),n(a,{value:e.workoutItem.sets_completed,"onUpdate:value":[t[0]||(t[0]=r=>e.workoutItem.sets_completed=r),t[1]||(t[1]=r=>e.updateWorkoutItem({sets_completed:r}))],type:"number",min:0,max:e.workoutItem.target_sets},null,8,["value","max"]),i("span",null,"/ "+b(e.workoutItem.target_sets),1)])):f("",!0),e.workoutItem.target_reps?(v(),_("div",D,[t[9]||(t[9]=i("label",null,"Reps:",-1)),n(a,{value:e.workoutItem.reps_completed,"onUpdate:value":[t[2]||(t[2]=r=>e.workoutItem.reps_completed=r),t[3]||(t[3]=r=>e.updateWorkoutItem({reps_completed:r}))],type:"number",min:0,max:e.workoutItem.target_reps},null,8,["value","max"]),i("span",null,"/ "+b(e.workoutItem.target_reps),1)])):f("",!0),e.workoutItem.target_duration?(v(),_("div",J,[t[10]||(t[10]=i("label",null,"Duration (s):",-1)),n(a,{value:e.workoutItem.duration_completed,"onUpdate:value":[t[4]||(t[4]=r=>e.workoutItem.duration_completed=r),t[5]||(t[5]=r=>e.updateWorkoutItem({duration_completed:r}))],type:"number",min:0,max:e.workoutItem.target_duration},null,8,["value","max"]),i("span",null,"/ "+b(e.workoutItem.target_duration),1)])):f("",!0),e.workoutItem.target_weight?(v(),_("div",M,[t[11]||(t[11]=i("label",null,"Weight (lbs):",-1)),n(a,{value:e.workoutItem.weight_completed,"onUpdate:value":[t[6]||(t[6]=r=>e.workoutItem.weight_completed=r),t[7]||(t[7]=r=>e.updateWorkoutItem({weight_completed:r}))],type:"number",min:0},null,8,["value"]),i("span",null,"/ "+b(e.workoutItem.target_weight),1)])):f("",!0)])]),_:1},8,["title"])}const K=W(H,[["render",G],["__scopeId","data-v-d8b8c156"]]),L=$({name:"WorkoutView",components:{PageHeader:B,WorkoutForm:j,WorkoutItemForm:z,WorkoutItem:K},setup(){const{accessToken:e}=h(),t=w({name:"",description:"",status:"",checklist_items:[]}),p=w(null),k=w(!0),c=w([{title:"Workouts",disabled:!1,href:"/#/workouts"}]),u=S(),a=w(u.params.id);U(()=>u.params.id,o=>{a.value=o});const l=async()=>{const o=`https://api.fordsdevelopment.co.uk/daily_discipline/checklists/${a.value}`,s=await fetch(o,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.value}`}});if(s.ok){k.value=!1;const g=await s.json();t.value=g,c.value.push({title:g.name,disabled:!0,href:`/workouts/${a}`})}else{k.value=!1;const g=await s.json();p.value=g.error}};return U(e,o=>{o&&l()},{immediate:!0}),{workout:t,breadcrumbs:c,workoutItemBulkUpdateUrl:"https://api.fordsdevelopment.co.uk/daily_discipline/checklist_items/bulk_update",accessToken:e,errorMessage:p,loading:k}}}),Q={class:"page-header"},X={class:"p-1"};function Y(e,t,p,k,c,u){const a=d("PageHeader"),l=d("n-button"),r=d("WorkoutForm"),o=d("WorkoutItem"),s=d("n-order-list"),g=d("WorkoutItemForm");return v(),_(V,null,[i("div",Q,[n(a,{title:e.workout.name},null,8,["title"]),n(r,{workout:e.workout},{trigger:m(({openDialog:I})=>[n(l,{onClick:I},{default:m(()=>t[0]||(t[0]=[y("Edit Workout")])),_:2},1032,["onClick"])]),_:1},8,["workout"]),n(E,{items:e.breadcrumbs},{prepend:m(()=>[n(R,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),i("div",X,[n(s,{items:e.workout.checklist_items,updateUrl:e.workoutItemBulkUpdateUrl,accessToken:e.accessToken,loading:e.loading,modelName:"workout_items"},{default:m(I=>[n(o,{workoutItem:I},null,8,["workoutItem"])]),_:1},8,["items","updateUrl","accessToken","loading"])]),n(g,{workoutId:e.workoutId},{trigger:m(({openDialog:I})=>[n(l,{class:"m-1",onClick:I},{default:m(()=>t[1]||(t[1]=[y("New Exercise")])),_:2},1032,["onClick"])]),_:1},8,["workoutId"])],64)}const oe=W(L,[["render",Y]]);export{oe as default};
