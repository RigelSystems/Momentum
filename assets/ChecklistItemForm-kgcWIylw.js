import{d as V,aF as b,R as S,j as T,r as U,b as c,v as w,_ as R,e as n,w as m,f as d,o as a,g as p,V as C,a0 as f,l as o,a as I,aD as g,c as N,t as F,h as $}from"./index-BUBkwTCb.js";import{S as D}from"./SelectIcon-Cqv9r0C2.js";const B=V({name:"ChecklistItemForm",props:{checklistItem:{type:Object,required:!1,default:()=>({name:"",icon:""})}},components:{RecordForm:S,SelectIcon:D,SelectFromRequest:b},setup(l,{emit:h}){const{accessToken:_}=T(),v=U([]),r=w(),y=U(["not started","blocked","done"]),i=c(()=>parseInt(r.params.id));l.checklistItem.checklist_id=i.value;const s=c(()=>!!l.checklistItem.id),u=c(()=>s.value?`https://api.fordsdevelopment.co.uk/daily_discipline/checklist_items/${l.checklistItem.id}`:"https://api.fordsdevelopment.co.uk/daily_discipline/checklist_items"),k=c(()=>s.value?"PUT":"POST");return{accessToken:_,isEditMode:s,endpoint:u,method:k,handleSave:async j=>{h("save")},handleDelete:async()=>{h("delete")},value:v,checklistId:i,statusOptions:y,statusUrl:"https://api.fordsdevelopment.co.uk/daily_discipline//checklist_items/statuses",typesUrl:"https://api.fordsdevelopment.co.uk/daily_discipline//checklist_items/checklist_item_types"}}}),E=["onUpdate:modelValue"],q=["onUpdate:modelValue"];function M(l,h,_,v,r,y){const i=d("NButton"),s=d("NTextInput"),u=d("NSelectInputFromRequest"),k=d("RecordForm");return a(),n(k,{record:l.checklistItem,endpoint:l.endpoint,method:l.method,onSave:l.handleSave,onDelete:l.handleDelete},{trigger:m(({openDialog:e})=>[$(l.$slots,"trigger",{openDialog:e},()=>[p(i,{label:l.isEditMode?"Edit Checklist Item":"Add Checklist Item"},null,8,["label"])])]),title:m(()=>[I("span",null,F(l.isEditMode?"Edit Checklist Item":"Add New Checklist Item"),1)]),form:m(({record:e})=>[p(C,null,{default:m(()=>[f(I("input",{type:"hidden",name:"chcklist_id","onUpdate:modelValue":t=>e.checklist_id=t},null,8,E),[[g,e.checklist_id]]),p(s,{value:e.name,"onUpdate:value":t=>e.name=t,name:"name",label:"Name"},null,8,["value","onUpdate:value"]),p(u,{url:l.typesUrl,valueKey:"name",name:"checklist_item_types",accessToken:l.accessToken,modelValue:e.checklist_item_type,"onUpdate:modelValue":t=>e.checklist_item_type=t,label:"checklist_item_types"},null,8,["url","accessToken","modelValue","onUpdate:modelValue"]),e.checklist_item_type==="task"?(a(),n(u,{key:0,url:l.statusUrl,valueKey:"name",name:"statuses",accessToken:l.accessToken,modelValue:e.status,"onUpdate:modelValue":t=>e.status=t,label:"statuses"},null,8,["url","accessToken","modelValue","onUpdate:modelValue"])):o("",!0),e.checklist_item_type==="rating"?f((a(),N("input",{key:1,type:"number","onUpdate:modelValue":t=>e.value=t,name:"value",step:"0.5",min:"0",max:"5",class:"form-control",placeholder:"Rating (0-5)"},null,8,q)),[[g,e.value]]):o("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(s,{key:2,value:e.sets,"onUpdate:value":t=>e.sets=t,name:"sets",label:"Sets"},null,8,["value","onUpdate:value"])):o("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(s,{key:3,value:e.reps,"onUpdate:value":t=>e.reps=t,name:"reps",label:"Reps"},null,8,["value","onUpdate:value"])):o("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(s,{key:4,value:e.weight,"onUpdate:value":t=>e.weight=t,name:"weight",label:"Weight"},null,8,["value","onUpdate:value"])):o("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(s,{key:5,value:e.unit,"onUpdate:value":t=>e.unit=t,name:"unit",label:"Unit"},null,8,["value","onUpdate:value"])):o("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(s,{key:6,value:e.rest,"onUpdate:value":t=>e.rest=t,name:"rest",label:"Rest (seconds)"},null,8,["value","onUpdate:value"])):o("",!0)]),_:2},1024)]),_:3},8,["record","endpoint","method","onSave","onDelete"])}const x=R(B,[["render",M]]);export{x as C};
