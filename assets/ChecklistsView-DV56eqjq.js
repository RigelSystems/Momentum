import{d as v,P as g,j as w,r as k,k as T,b as B,_ as U,c as y,a as m,g as t,f as o,w as i,F as N,o as $,i as h,t as V}from"./index-DSd1PwLk.js";import{C as F}from"./ChecklistForm-BkRnCT45.js";import"./VTextarea-C1e6E5tB.js";const S=v({name:"ChecklistsView",components:{PageHeader:g,ChecklistForm:F},setup(){const{accessToken:e}=w(),s=k(!0),r=k([]),d=k(null),p=async()=>{const n=await fetch("https://api.fordsdevelopment.co.uk/daily_discipline/checklists",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.value}`}});if(n.ok){const a=await n.json();r.value=a,s.value=!1}else{const a=await n.json();d.value=a.error,s.value=!1}};T(e,l=>{l&&p()},{immediate:!0});const _=()=>{p()},u=B(()=>"https://api.fordsdevelopment.co.uk/daily_discipline/checklists/bulk_update");return{checklists:r,loading:s,errorMessage:d,handleTaskSaved:_,checklistBulkUpdateUrl:u,accessToken:e}}}),b={class:"standard-container p-1"},j={class:"p-1"};function P(e,s,r,d,p,_){const u=o("PageHeader"),l=o("n-button"),n=o("ChecklistForm"),a=o("RouterLink"),f=o("NCard"),C=o("n-order-list");return $(),y(N,null,[m("div",b,[t(u,{title:"Checklists"})]),m("div",j,[t(n,{onSave:e.handleTaskSaved},{trigger:i(({openDialog:c})=>[t(l,{onClick:c},{default:i(()=>s[0]||(s[0]=[h("New Checklist")])),_:2},1032,["onClick"])]),_:1},8,["onSave"])]),t(C,{items:e.checklists,loading:e.loading,modelName:"checklists",updateUrl:e.checklistBulkUpdateUrl,accessToken:e.accessToken},{default:i(c=>[t(f,{title:c.name},{content:i(()=>[m("p",null,V(c.description),1),t(a,{to:{name:"checklist",params:{id:c.id}},class:"mr-2"},{default:i(()=>s[1]||(s[1]=[h(" View ")])),_:2},1032,["to"])]),_:2},1032,["title"])]),_:1},8,["items","loading","updateUrl","accessToken"])],64)}const R=U(S,[["render",P]]);export{R as default};
