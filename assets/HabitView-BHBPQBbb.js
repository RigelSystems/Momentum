import{d as F,P as N,m as V,r,v as M,x as B,p as T,_ as S,c as l,a,g as p,f as m,w as C,y as L,q as D,F as f,s as _,o as s,l as P,e as w}from"./index-DjeOlQxX.js";import{a as Y}from"./Habit-BZwAVBYC.js";import{H as A,g as E}from"./dateUtils-vmBcxR3M.js";import{r as q}from"./requestApi-CaFzMg7j.js";const I=F({name:"HabitView",components:{PageHeader:N,HabitEntry:A,Habit:Y},setup(){const e=E(30,"YYYY-MM-DD"),c=E(30,"ddd<br>D"),{getAccessTokenSilently:g,user:$}=V(),v=r(null),k=r(null),y=r(!0),d=r([{title:"Habits",disabled:!1,href:"/#/habits"}]),b=r({}),u=M(),i=r(u.params.id);B(()=>u.params.id,o=>{i.value=o}),T(async()=>{const o=`https://api.fordsdevelopment.co.uk/daily_discipline/habits/${i.value}`,H=q(o,"GET");try{const n=await H();console.log("Habit data:",n),b.value=n,console.log(n),d.value.push({title:n.name,disabled:!0,href:`/habits/${i}`})}catch{k.value="Failed to fetch records"}y.value=!1});const h=async()=>{v.value=await g()};return T(async()=>{await h()}),{habit:b,breadcrumbs:d,lastSevenDays:e,lastSevenDaysNice:c,getHabitEntiryForDate:(o,H)=>o.habit_entries.find(n=>n.date===H),accessToken:v}}}),R={class:"page-header"},z={class:"standard-container-3 p-1"},G={class:"page-wrapper overflow-x-auto"},U={class:"completion-percentages-container"},X=["innerHTML"],j={class:"habit-entires__container"},J={class:"table-habit-name"};function K(e,c,g,$,v,k){var i,h;const y=m("PageHeader"),d=m("NDashboardTile"),b=m("Habit"),u=m("HabitEntry");return s(),l(f,null,[a("div",R,[p(y,{title:e.habit.name},null,8,["title"]),p(L,{items:e.breadcrumbs},{prepend:C(()=>[p(P,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),a("div",z,[((h=(i=e.habit)==null?void 0:i.dashboard_data)==null?void 0:h.length)>0?(s(!0),l(f,{key:0},_(e.habit.dashboard_data,(t,o)=>(s(),w(d,{key:o,title:t.title,value:t.value,icon:t.icon,colour:t.colour,bottomText:t.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):D("",!0)]),a("div",G,[a("div",U,[c[0]||(c[0]=a("div",{class:"table-habit-name"},null,-1)),(s(!0),l(f,null,_(e.lastSevenDaysNice,t=>(s(),l("small",{class:"table-cell",key:t},[a("span",{class:"table-date",innerHTML:t},null,8,X)]))),128))]),a("div",j,[a("div",J,[p(b,{habit:e.habit,fetchHabits:e.fetchHabits},null,8,["habit","fetchHabits"])]),(s(!0),l(f,null,_(e.lastSevenDays,t=>(s(),l("div",{class:"table-cell",key:t},[e.accessToken?(s(),w(u,{key:0,entry:e.getHabitEntiryForDate(e.habit,t),habit:e.habit,date:t,colour:e.habit.colour,fetchHabits:e.fetchHabits,accessToken:e.accessToken},null,8,["entry","habit","date","colour","fetchHabits","accessToken"])):D("",!0)]))),128))])])],64)}const x=S(I,[["render",K]]);export{x as default};
