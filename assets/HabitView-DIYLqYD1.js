import{d as x,P as B,m as F,r as _,v as M,x as P,p as V,_ as S,c as i,a as l,g as r,f as p,w as h,y as Y,F as v,s as y,o as s,l as A,q as g,e as k,t as f}from"./index-7gKEMWz-.js";import{a as R}from"./Habit-CG_zALw4.js";import{H as q,g as E}from"./dateUtils-CK5xb56A.js";import{r as I}from"./requestApi-CEl6l6gy.js";const L=x({name:"HabitView",components:{PageHeader:B,HabitEntry:q,Habit:R},setup(){const o=E(365,"YYYY-MM-DD"),$=E(365,"ddd<br>D"),{getAccessTokenSilently:D,user:N}=F(),T=_(null),w=_(null),H=_(!0),c=_([{title:"Habits",disabled:!1,href:"/#/habits"}]),d=_({}),u=M(),m=_(u.params.id);P(()=>u.params.id,a=>{m.value=a}),V(async()=>{const a=`https://api.fordsdevelopment.co.uk/daily_discipline/habits/${m.value}`,t=I(a,"GET");try{const e=await t();console.log("Habit data:",e),d.value=e,console.log(e),c.value.push({title:e.name,disabled:!0,href:`/habits/${m}`})}catch{w.value="Failed to fetch records"}H.value=!1});const C=(a,t)=>a.habit_entries.find(e=>e.date===t),n=async()=>{T.value=await D()};return V(async()=>{await n()}),{habit:d,breadcrumbs:c,lastSevenDays:o,lastSevenDaysNice:$,getHabitEntiryForDate:C,accessToken:T}}}),z={class:"page-header"},G={class:"standard-container-3"},U={class:"standard-container-3"},X={class:"standard-container-3"},j={class:"standard-container-3"},J={class:"habit-yearly-container"};function K(o,$,D,N,T,w){const H=p("PageHeader"),c=p("n-tab"),d=p("NDashboardTile"),u=p("n-tab-panel"),m=p("n-tabs"),C=p("HabitEntry");return s(),i(v,null,[l("div",z,[r(H,{title:o.habit.name},null,8,["title"]),r(Y,{items:o.breadcrumbs},{prepend:h(()=>[r(A,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),r(m,null,{tabs:h(({activeTab:n,setActiveTab:a})=>[r(c,{label:"Totals",active:n===0,onClick:t=>a(0)},null,8,["active","onClick"]),r(c,{label:"Averages",active:n===1,onClick:t=>a(1)},null,8,["active","onClick"]),r(c,{label:"Changes",active:n===2,onClick:t=>a(2)},null,8,["active","onClick"]),r(c,{label:"Records",active:n===3,onClick:t=>a(3)},null,8,["active","onClick"])]),default:h(({activeTab:n})=>[r(u,{index:0,activeTab:n},{default:h(()=>{var a,t;return[l("div",G,[((t=(a=o.habit)==null?void 0:a.dashboard_data_totals)==null?void 0:t.length)>0?(s(!0),i(v,{key:0},y(o.habit.dashboard_data_totals,(e,b)=>(s(),k(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:1,activeTab:n},{default:h(()=>{var a,t;return[l("div",U,[((t=(a=o.habit)==null?void 0:a.dashboard_data_averages)==null?void 0:t.length)>0?(s(!0),i(v,{key:0},y(o.habit.dashboard_data_averages,(e,b)=>(s(),k(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:2,activeTab:n},{default:h(()=>{var a,t;return[l("div",X,[((t=(a=o.habit)==null?void 0:a.dashboard_data_changes)==null?void 0:t.length)>0?(s(!0),i(v,{key:0},y(o.habit.dashboard_data_changes,(e,b)=>(s(),k(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:3,activeTab:n},{default:h(()=>{var a,t;return[l("div",j,[((t=(a=o.habit)==null?void 0:a.dashboard_data_records)==null?void 0:t.length)>0?(s(!0),i(v,{key:0},y(o.habit.dashboard_data_records,(e,b)=>(s(),k(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"])]),_:1}),l("div",null,[(s(!0),i(v,null,y(o.habit.monthly_data,n=>(s(),i("div",{key:n.month},[l("div",null,[l("h4",null,f(n.month),1),l("div",J,[(s(!0),i(v,null,y(n.entries,a=>(s(),i("div",{class:"habit-yearly-wrapper",key:a.id},[o.accessToken?(s(),k(C,{key:0,entry:a.entry,habit:o.habit,date:a.date,colour:o.habit.colour,fetchHabits:o.fetchHabits,accessToken:o.accessToken},null,8,["entry","habit","date","colour","fetchHabits","accessToken"])):g("",!0)]))),128))]),l("p",null,"Total: "+f(n.total_entries),1),l("p",null,"Daily Average: "+f(n.daily_average),1),l("p",null,"Monthly Average: "+f(n.monthly_average),1)])]))),128))])],64)}const ee=S(L,[["render",K]]);export{ee as default};
