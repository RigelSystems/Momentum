import{d as T,ad as U,P as $,x as F,r as u,s as N,_ as V,c as B,a as C,g as e,w as t,f as a,F as j,o as L,i as h,t as y}from"./index-BZi0SMls.js";const A=T({name:"ChecklistsView",components:{PageHeader:$,ChecklistForm:U},setup(){const{getAccessTokenSilently:s,user:l}=F(),p=u(null),w=u(null),k=u(!0),m=u([]),r=u([]),g=async()=>{const i=await fetch("https://api.fordsdevelopment.co.uk/daily_discipline/checklists",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${p.value}`}});if(i.ok){k.value=!1;const n=await i.json();m.value=n.filter(d=>d.checklist_type==="tasks"),r.value=n.filter(d=>d.checklist_type==="workout"),console.log("Fetched tasks:",m.value),console.log("Fetched workouts:",r.value),console.log("Fetched checklists:",n)}else{k.value=!1;const n=await i.json();w.value=n.error}},_=async()=>{p.value=await s()},f="https://api.fordsdevelopment.co.uk/daily_discipline/checklists/bulk_update";return N(async()=>{await _(),g()}),{tasks:m,workouts:r,loading:k,accessToken:p,updateUrl:f}}}),M={class:"standard-container p-1"};function P(s,l,p,w,k,m){const r=a("n-button"),g=a("ChecklistForm"),_=a("n-tab"),f=a("RouterLink"),v=a("NCard"),i=a("n-order-list"),n=a("n-tab-panel"),d=a("n-tabs");return L(),B(j,null,[C("div",M,[e(g,null,{trigger:t(({openDialog:c})=>[e(r,{onClick:c},{default:t(()=>l[0]||(l[0]=[h("New List")])),_:2},1032,["onClick"])]),_:1})]),e(d,null,{tabs:t(({activeTab:c,setActiveTab:o})=>[e(_,{label:"Tasks",active:c===0,onClick:b=>o(0)},null,8,["active","onClick"]),e(_,{label:"Workouts",active:c===1,onClick:b=>o(1)},null,8,["active","onClick"])]),default:t(({activeTab:c})=>[e(n,{index:0,activeTab:c},{default:t(()=>[e(i,{items:s.tasks,updateUrl:s.updateUrl,loading:s.loading,accessToken:s.accessToken,modelName:"checklists"},{default:t(o=>[e(v,{title:o.name},{content:t(()=>[C("p",null,y(o.description),1),e(f,{to:{name:"checklist",params:{id:o.id}},class:"mr-2"},{default:t(()=>l[1]||(l[1]=[h(" View ")])),_:2},1032,["to"])]),_:2},1032,["title"])]),_:1},8,["items","updateUrl","loading","accessToken"])]),_:2},1032,["activeTab"]),e(n,{index:1,activeTab:c},{default:t(()=>[e(i,{items:s.workouts,updateUrl:s.updateUrl,loading:s.loading,accessToken:s.accessToken,modelName:"checklists"},{default:t(o=>[e(v,{title:o.name},{content:t(()=>[C("p",null,y(o.description),1),e(f,{to:{name:"checklist",params:{id:o.id}},class:"mr-2"},{default:t(()=>l[2]||(l[2]=[h(" View ")])),_:2},1032,["to"])]),_:2},1032,["title"])]),_:1},8,["items","updateUrl","loading","accessToken"])]),_:2},1032,["activeTab"])]),_:1})],64)}const S=V(A,[["render",P]]);export{S as default};
