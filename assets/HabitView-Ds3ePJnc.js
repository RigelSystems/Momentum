import{d as x,P as B,v as F,r as _,x as M,k as P,q as V,_ as S,c as i,a as l,g as r,f as p,w as h,F as v,m as y,o as s,p as Y,l as k,e as g,t as f}from"./index-DOFmpoWA.js";import{H as A,r as R}from"./requestApi-gQiYX7EN.js";import{H as q,g as E}from"./HabitEntry-UVNsRBQL.js";import{V as I}from"./VBreadcrumbs-Bt_jAMWW.js";import"./SelectIcon-DDCA7Ku2.js";import"./ChecklistItemTask-D30deXrM.js";const L=x({name:"HabitView",components:{PageHeader:B,HabitEntry:q,Habit:A},setup(){const o=E(365,"YYYY-MM-DD"),$=E(365,"ddd<br>D"),{getAccessTokenSilently:D,user:N}=F(),T=_(null),w=_(null),H=_(!0),c=_([{title:"Habits",disabled:!1,href:"/#/habits"}]),d=_({}),u=M(),m=_(u.params.id);P(()=>u.params.id,t=>{m.value=t}),V(async()=>{const t=`https://api.fordsdevelopment.co.uk/daily_discipline/habits/${m.value}`,a=R(t,"GET");try{const e=await a();console.log("Habit data:",e),d.value=e,console.log(e),c.value.push({title:e.name,disabled:!0,href:`/habits/${m}`})}catch{w.value="Failed to fetch records"}H.value=!1});const C=(t,a)=>t.habit_entries.find(e=>e.date===a),n=async()=>{T.value=await D()};return V(async()=>{await n()}),{habit:d,breadcrumbs:c,lastSevenDays:o,lastSevenDaysNice:$,getHabitEntiryForDate:C,accessToken:T}}}),z={class:"page-header"},G={class:"standard-container-3"},U={class:"standard-container-3"},X={class:"standard-container-3"},j={class:"standard-container-3"},J={class:"habit-yearly-container"};function K(o,$,D,N,T,w){const H=p("PageHeader"),c=p("n-tab"),d=p("NDashboardTile"),u=p("n-tab-panel"),m=p("n-tabs"),C=p("HabitEntry");return s(),i(v,null,[l("div",z,[r(H,{title:o.habit.name},null,8,["title"]),r(I,{items:o.breadcrumbs},{prepend:h(()=>[r(Y,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),r(m,null,{tabs:h(({activeTab:n,setActiveTab:t})=>[r(c,{label:"Totals",active:n===0,onClick:a=>t(0)},null,8,["active","onClick"]),r(c,{label:"Averages",active:n===1,onClick:a=>t(1)},null,8,["active","onClick"]),r(c,{label:"Changes",active:n===2,onClick:a=>t(2)},null,8,["active","onClick"]),r(c,{label:"Records",active:n===3,onClick:a=>t(3)},null,8,["active","onClick"])]),default:h(({activeTab:n})=>[r(u,{index:0,activeTab:n},{default:h(()=>{var t,a;return[l("div",G,[((a=(t=o.habit)==null?void 0:t.dashboard_data_totals)==null?void 0:a.length)>0?(s(!0),i(v,{key:0},y(o.habit.dashboard_data_totals,(e,b)=>(s(),g(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):k("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:1,activeTab:n},{default:h(()=>{var t,a;return[l("div",U,[((a=(t=o.habit)==null?void 0:t.dashboard_data_averages)==null?void 0:a.length)>0?(s(!0),i(v,{key:0},y(o.habit.dashboard_data_averages,(e,b)=>(s(),g(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):k("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:2,activeTab:n},{default:h(()=>{var t,a;return[l("div",X,[((a=(t=o.habit)==null?void 0:t.dashboard_data_changes)==null?void 0:a.length)>0?(s(!0),i(v,{key:0},y(o.habit.dashboard_data_changes,(e,b)=>(s(),g(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):k("",!0)])]}),_:2},1032,["activeTab"]),r(u,{index:3,activeTab:n},{default:h(()=>{var t,a;return[l("div",j,[((a=(t=o.habit)==null?void 0:t.dashboard_data_records)==null?void 0:a.length)>0?(s(!0),i(v,{key:0},y(o.habit.dashboard_data_records,(e,b)=>(s(),g(d,{key:b,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):k("",!0)])]}),_:2},1032,["activeTab"])]),_:1}),l("div",null,[(s(!0),i(v,null,y(o.habit.monthly_data,n=>(s(),i("div",{key:n.month},[l("div",null,[l("h4",null,f(n.month),1),l("div",J,[(s(!0),i(v,null,y(n.entries,t=>(s(),i("div",{class:"habit-yearly-wrapper",key:t.id},[o.accessToken?(s(),g(C,{key:0,entry:t.entry,habit:o.habit,date:t.date,colour:o.habit.colour,fetchHabits:o.fetchHabits,accessToken:o.accessToken},null,8,["entry","habit","date","colour","fetchHabits","accessToken"])):k("",!0)]))),128))]),l("p",null,"Total: "+f(n.total_entries),1),l("p",null,"Daily Average: "+f(n.daily_average),1),l("p",null,"Monthly Average: "+f(n.monthly_average),1)])]))),128))])],64)}const ae=S(L,[["render",K]]);export{ae as default};
