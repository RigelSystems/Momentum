import{d as V,P as M,m as B,r as h,v as S,x as L,p as E,_ as P,c as r,a as i,g as l,f as c,w as _,y as Y,F as v,s as f,o as n,l as q,q as g,e as k}from"./index-CS1mO2Sq.js";import{a as A}from"./Habit-CLVKi_YD.js";import{H as I,g as F}from"./dateUtils-BCghkZF0.js";import{r as R}from"./requestApi-D9gaElgt.js";const z=V({name:"HabitView",components:{PageHeader:M,HabitEntry:I,Habit:A},setup(){const e=F(30,"YYYY-MM-DD"),y=F(30,"ddd<br>D"),{getAccessTokenSilently:C,user:N}=B(),H=h(null),$=h(null),T=h(!0),d=h([{title:"Habits",disabled:!1,href:"/#/habits"}]),u=h({}),b=S(),p=h(b.params.id);L(()=>b.params.id,t=>{p.value=t}),E(async()=>{const t=`https://api.fordsdevelopment.co.uk/daily_discipline/habits/${p.value}`,s=R(t,"GET");try{const a=await s();console.log("Habit data:",a),u.value=a,console.log(a),d.value.push({title:a.name,disabled:!0,href:`/habits/${p}`})}catch{$.value="Failed to fetch records"}T.value=!1});const D=async()=>{H.value=await C()};return E(async()=>{await D()}),{habit:u,breadcrumbs:d,lastSevenDays:e,lastSevenDaysNice:y,getHabitEntiryForDate:(t,s)=>t.habit_entries.find(a=>a.date===s),accessToken:H}}}),G={class:"page-header"},U={class:"standard-container-3"},X={class:"standard-container-3"},j={class:"standard-container-3"},J={class:"page-wrapper overflow-x-auto"},K={class:"completion-percentages-container"},O=["innerHTML"],Q={class:"habit-entires__container"},W={class:"table-habit-name"};function Z(e,y,C,N,H,$){const T=c("PageHeader"),d=c("n-tab"),u=c("NDashboardTile"),b=c("n-tab-panel"),p=c("n-tabs"),D=c("Habit"),w=c("HabitEntry");return n(),r(v,null,[i("div",G,[l(T,{title:e.habit.name},null,8,["title"]),l(Y,{items:e.breadcrumbs},{prepend:_(()=>[l(q,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),l(p,null,{tabs:_(({activeTab:t,setActiveTab:s})=>[l(d,{label:"Totals",active:t===0,onClick:a=>s(0)},null,8,["active","onClick"]),l(d,{label:"Averages",active:t===1,onClick:a=>s(1)},null,8,["active","onClick"]),l(d,{label:"Changes",active:t===2,onClick:a=>s(2)},null,8,["active","onClick"])]),default:_(({activeTab:t})=>[l(b,{index:0,activeTab:t},{default:_(()=>{var s,a;return[i("div",U,[((a=(s=e.habit)==null?void 0:s.dashboard_data_totals)==null?void 0:a.length)>0?(n(!0),r(v,{key:0},f(e.habit.dashboard_data_totals,(o,m)=>(n(),k(u,{key:m,title:o.title,value:o.value,icon:o.icon,colour:o.colour,bottomText:o.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"]),l(b,{index:1,activeTab:t},{default:_(()=>{var s,a;return[i("div",X,[((a=(s=e.habit)==null?void 0:s.dashboard_data_averages)==null?void 0:a.length)>0?(n(!0),r(v,{key:0},f(e.habit.dashboard_data_averages,(o,m)=>(n(),k(u,{key:m,title:o.title,value:o.value,icon:o.icon,colour:o.colour,bottomText:o.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"]),l(b,{index:2,activeTab:t},{default:_(()=>{var s,a;return[i("div",j,[((a=(s=e.habit)==null?void 0:s.dashboard_data_changes)==null?void 0:a.length)>0?(n(!0),r(v,{key:0},f(e.habit.dashboard_data_changes,(o,m)=>(n(),k(u,{key:m,title:o.title,value:o.value,icon:o.icon,colour:o.colour,bottomText:o.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):g("",!0)])]}),_:2},1032,["activeTab"])]),_:1}),i("div",J,[i("div",K,[y[0]||(y[0]=i("div",{class:"table-habit-name"},null,-1)),(n(!0),r(v,null,f(e.lastSevenDaysNice,t=>(n(),r("small",{class:"table-cell",key:t},[i("span",{class:"table-date",innerHTML:t},null,8,O)]))),128))]),i("div",Q,[i("div",W,[l(D,{habit:e.habit,fetchHabits:e.fetchHabits},null,8,["habit","fetchHabits"])]),(n(!0),r(v,null,f(e.lastSevenDays,t=>(n(),r("div",{class:"table-cell",key:t},[e.accessToken?(n(),k(w,{key:0,entry:e.getHabitEntiryForDate(e.habit,t),habit:e.habit,date:t,colour:e.habit.colour,fetchHabits:e.fetchHabits,accessToken:e.accessToken},null,8,["entry","habit","date","colour","fetchHabits","accessToken"])):g("",!0)]))),128))])])],64)}const oe=P(z,[["render",Z]]);export{oe as default};
