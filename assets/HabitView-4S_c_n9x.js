import{d as V,P as N,m as B,r as d,v as M,x as P,p as $,_ as S,c as u,a as b,g as n,f as h,w as p,y as Y,F as m,s as y,o as l,l as q,q as f,e as g}from"./index-12tb5DuE.js";import{a as x}from"./Habit-YhtolrKi.js";import{H as A,g as E}from"./dateUtils-iXSr1GGn.js";import{r as I}from"./requestApi-C4bvheT5.js";const L=V({name:"HabitView",components:{PageHeader:N,HabitEntry:A,Habit:x},setup(){const a=E(365,"YYYY-MM-DD"),D=E(365,"ddd<br>D"),{getAccessTokenSilently:w,user:F}=B(),k=d(null),C=d(null),H=d(!0),r=d([{title:"Habits",disabled:!1,href:"/#/habits"}]),c=d({}),i=M(),v=d(i.params.id);P(()=>i.params.id,t=>{v.value=t}),$(async()=>{const t=`https://api.fordsdevelopment.co.uk/daily_discipline/habits/${v.value}`,o=I(t,"GET");try{const e=await o();console.log("Habit data:",e),c.value=e,console.log(e),r.value.push({title:e.name,disabled:!0,href:`/habits/${v}`})}catch{C.value="Failed to fetch records"}H.value=!1});const T=async()=>{k.value=await w()};return $(async()=>{await T()}),{habit:c,breadcrumbs:r,lastSevenDays:a,lastSevenDaysNice:D,getHabitEntiryForDate:(t,o)=>t.habit_entries.find(e=>e.date===o),accessToken:k}}}),R={class:"page-header"},z={class:"standard-container-3"},G={class:"standard-container-3"},U={class:"standard-container-3"},X={class:"page-wrapper overflow-x-auto"},j={class:"habit-yearly-container"};function J(a,D,w,F,k,C){const H=h("PageHeader"),r=h("n-tab"),c=h("NDashboardTile"),i=h("n-tab-panel"),v=h("n-tabs"),T=h("HabitEntry");return l(),u(m,null,[b("div",R,[n(H,{title:a.habit.name},null,8,["title"]),n(Y,{items:a.breadcrumbs},{prepend:p(()=>[n(q,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),n(v,null,{tabs:p(({activeTab:s,setActiveTab:t})=>[n(r,{label:"Totals",active:s===0,onClick:o=>t(0)},null,8,["active","onClick"]),n(r,{label:"Averages",active:s===1,onClick:o=>t(1)},null,8,["active","onClick"]),n(r,{label:"Changes",active:s===2,onClick:o=>t(2)},null,8,["active","onClick"])]),default:p(({activeTab:s})=>[n(i,{index:0,activeTab:s},{default:p(()=>{var t,o;return[b("div",z,[((o=(t=a.habit)==null?void 0:t.dashboard_data_totals)==null?void 0:o.length)>0?(l(!0),u(m,{key:0},y(a.habit.dashboard_data_totals,(e,_)=>(l(),g(c,{key:_,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):f("",!0)])]}),_:2},1032,["activeTab"]),n(i,{index:1,activeTab:s},{default:p(()=>{var t,o;return[b("div",G,[((o=(t=a.habit)==null?void 0:t.dashboard_data_averages)==null?void 0:o.length)>0?(l(!0),u(m,{key:0},y(a.habit.dashboard_data_averages,(e,_)=>(l(),g(c,{key:_,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):f("",!0)])]}),_:2},1032,["activeTab"]),n(i,{index:2,activeTab:s},{default:p(()=>{var t,o;return[b("div",U,[((o=(t=a.habit)==null?void 0:t.dashboard_data_changes)==null?void 0:o.length)>0?(l(!0),u(m,{key:0},y(a.habit.dashboard_data_changes,(e,_)=>(l(),g(c,{key:_,title:e.title,value:e.value,icon:e.icon,colour:e.colour,bottomText:e.bottomText},null,8,["title","value","icon","colour","bottomText"]))),128)):f("",!0)])]}),_:2},1032,["activeTab"])]),_:1}),b("div",X,[b("div",j,[(l(!0),u(m,null,y(a.lastSevenDays,s=>(l(),u("div",{class:"habit-yearly-wrapper",key:s},[a.accessToken?(l(),g(T,{key:0,entry:a.getHabitEntiryForDate(a.habit,s),habit:a.habit,date:s,colour:a.habit.colour,fetchHabits:a.fetchHabits,accessToken:a.accessToken},null,8,["entry","habit","date","colour","fetchHabits","accessToken"])):f("",!0)]))),128))])])],64)}const Z=S(L,[["render",J]]);export{Z as default};
