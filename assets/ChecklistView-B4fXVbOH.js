import{d as I,_ as $,c as b,e as w,z as B,o as C,P as U,v as F,j as V,r as p,x as j,k as E,q as N,a as v,g as s,f as n,w as a,F as A,i as y,p as P}from"./index-DOFmpoWA.js";import{C as q}from"./ChecklistForm-D0SlGwXJ.js";import{C as z,a as H,b as T}from"./ChecklistItemTask-D30deXrM.js";import{V as x}from"./VBreadcrumbs-Bt_jAMWW.js";import"./VTextarea-js6yYqBr.js";import"./SelectIcon-DDCA7Ku2.js";const L=I({name:"ChecklistItemTimedExercise",props:{checklistItem:{type:Object,required:!0}}});function M(e,c,o,l,r,i){return" Timed checklist item component "}const O=$(L,[["render",M]]),D=I({name:"ChecklistItem",props:{checklistItem:{type:Object,required:!0}},components:{ChecklistItemForm:T,ChecklistItemWeightedExercise:H,ChecklistItemTimedExercise:O,ChecklistItemTask:z}});function R(e,c,o,l,r,i){return C(),b("div",null,[(C(),w(B(`ChecklistItem${e.checklistItem.checklist_item_type_classify}`),{checklistItem:e.checklistItem},null,8,["checklistItem"]))])}const S=$(D,[["render",R]]),W=I({name:"ChecklistView",components:{PageHeader:U,ChecklistItemForm:T,ChecklistItem:S,ChecklistForm:q},setup(){const{getAccessTokenSilently:e,user:c}=F(),{accessToken:o}=V(),l=p({name:"",status:"",checklist_items:[]}),r=p(null),i=p(!0),k=p([{title:"Checklists",disabled:!1,href:"/#/checklists"}]),m=j(),d=p(m.params.id);E(()=>m.params.id,t=>{d.value=t});const h=async()=>{const t=`https://api.fordsdevelopment.co.uk/daily_discipline/checklists/${d.value}`,f=await fetch(t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o.value}`}});if(f.ok){i.value=!1;const u=await f.json();l.value=u,k.value.push({title:u.name,disabled:!0,href:`/checklists/${d}`})}else{i.value=!1;const u=await f.json();r.value=u.error}},_=async()=>{o.value=await e()};return N(async()=>{await _(),await h()}),{checklist:l,breadcrumbs:k,checklistItemBulkUpdateUrl:"https://api.fordsdevelopment.co.uk/daily_discipline/checklist_items/bulk_update",accessToken:o,errorMessage:r,loading:i}}}),G={class:"page-header"},J={class:"p-1"};function K(e,c,o,l,r,i){const k=n("PageHeader"),m=n("n-button"),d=n("ChecklistForm"),h=n("ChecklistItem"),_=n("n-order-list"),g=n("ChecklistItemForm");return C(),b(A,null,[v("div",G,[s(k,{title:e.checklist.name},null,8,["title"]),s(d,{checklist:e.checklist},{trigger:a(({openDialog:t})=>[s(m,{onClick:t},{default:a(()=>c[0]||(c[0]=[y("Edit List")])),_:2},1032,["onClick"])]),_:1},8,["checklist"]),s(x,{items:e.breadcrumbs},{prepend:a(()=>[s(P,{icon:"$vuetify",size:"small"})]),_:1},8,["items"])]),v("div",J,[s(_,{items:e.checklist.checklist_items,updateUrl:e.checklistItemBulkUpdateUrl,accessToken:e.accessToken,loading:e.loading,modelName:"checklist_items"},{default:a(t=>[s(h,{checklistItem:t},null,8,["checklistItem"])]),_:1},8,["items","updateUrl","accessToken","loading"])]),s(g,null,{trigger:a(({openDialog:t})=>[s(m,{class:"m-1",onClick:t},{default:a(()=>c[1]||(c[1]=[y("New List Item")])),_:2},1032,["onClick"])]),_:1})],64)}const se=$(W,[["render",K]]);export{se as default};
