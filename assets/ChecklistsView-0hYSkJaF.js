import{d as v,P as g,j as B,r as o,k as T,b as m,_ as w,c as N,a as f,g as u,f as n,w as _,e as y,l as $,F,o as C,i as U}from"./index-CApi5JQT.js";import{C as V}from"./ChecklistForm-D_qWFaUC.js";import"./VTextarea-Ao40d_14.js";const b=v({name:"ChecklistsView",components:{PageHeader:g,ChecklistForm:V},setup(){const{accessToken:e}=B(),s=o(!0),c=o([]),r=o(null),h=o(null),i=async()=>{const t=await fetch("https://api.fordsdevelopment.co.uk/daily_discipline/checklists",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e.value}`}});if(t.ok){const k=await t.json();c.value=k,s.value=!1}else{const k=await t.json();r.value=k.error,s.value=!1}};T(e,a=>{a&&i()},{immediate:!0});const l=()=>{i()},d=m(()=>"https://api.fordsdevelopment.co.uk/daily_discipline/checklists/bulk_update"),p=m(()=>"https://api.fordsdevelopment.co.uk/daily_discipline/checklists");return{checklists:c,loading:s,errorMessage:r,handleTaskSaved:l,checklistBulkUpdateUrl:d,accessToken:e,checklistUrl:p,dataGrid:h}}}),S={class:"standard-container p-1"},j={class:"standard-container p-1"};function G(e,s,c,r,h,i){const l=n("PageHeader"),d=n("NButton"),p=n("ChecklistForm"),a=n("NDataGrid");return C(),N(F,null,[f("div",S,[u(l,{title:"Checklists"}),u(p,{onSave:e.handleTaskSaved},{trigger:_(({openDialog:t})=>[u(d,{onClick:t},{default:_(()=>s[0]||(s[0]=[U("New Checklist")])),_:2},1032,["onClick"])]),_:1},8,["onSave"])]),f("div",j,[e.accessToken?(C(),y(a,{key:0,ref:"dataGrid",url:e.checklistUrl,accessToken:e.accessToken,pageSize:10,search:!0,sortable:!0,searchableFields:["name"],sortableFields:["name"]},null,8,["url","accessToken"])):$("",!0)])],64)}const A=w(b,[["render",G]]);export{A as default};
