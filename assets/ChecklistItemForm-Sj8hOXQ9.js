import{d as b,aH as f,R as S,j as T,r as U,b as c,v as w,_ as R,e as n,w as m,f as p,o as a,g as d,V as C,a0 as g,l as i,a as I,aD as V,c as N,t as $,h as F}from"./index-LDKTPl-6.js";import{S as D}from"./SelectIcon-JCmWCGP1.js";const B=b({name:"ChecklistItemForm",props:{checklistItem:{type:Object,required:!1,default:()=>({name:"",icon:""})}},components:{RecordForm:S,SelectIcon:D,SelectFromRequest:f},setup(s,{emit:h}){const{accessToken:_}=T(),v=U([]),r=w(),y=U(["not started","blocked","done"]),o=c(()=>parseInt(r.params.id));s.checklistItem.checklist_id=o.value;const l=c(()=>!!s.checklistItem.id),u=c(()=>l.value?`https://api.rigelsystems.co.uk/daily_discipline/checklist_items/${s.checklistItem.id}`:"https://api.rigelsystems.co.uk/daily_discipline/checklist_items"),k=c(()=>l.value?"PUT":"POST");return{accessToken:_,isEditMode:l,endpoint:u,method:k,handleSave:async j=>{h("save")},handleDelete:async()=>{h("delete")},value:v,checklistId:o,statusOptions:y,statusUrl:"https://api.rigelsystems.co.uk/daily_discipline//checklist_items/statuses",typesUrl:"https://api.rigelsystems.co.uk/daily_discipline//checklist_items/checklist_item_types"}}}),E=["onUpdate:modelValue"],q=["onUpdate:modelValue"];function M(s,h,_,v,r,y){const o=p("NButton"),l=p("NTextInput"),u=p("NSelectInputFromRequest"),k=p("RecordForm");return a(),n(k,{record:s.checklistItem,endpoint:s.endpoint,method:s.method,onSave:s.handleSave,onDelete:s.handleDelete},{trigger:m(({openDialog:e})=>[F(s.$slots,"trigger",{openDialog:e},()=>[d(o,{label:s.isEditMode?"Edit Checklist Item":"Add Checklist Item"},null,8,["label"])])]),title:m(()=>[I("span",null,$(s.isEditMode?"Edit Checklist Item":"Add New Checklist Item"),1)]),form:m(({record:e})=>[d(C,null,{default:m(()=>[g(I("input",{type:"hidden",name:"chcklist_id","onUpdate:modelValue":t=>e.checklist_id=t},null,8,E),[[V,e.checklist_id]]),d(l,{value:e.name,"onUpdate:value":t=>e.name=t,name:"name",label:"Name"},null,8,["value","onUpdate:value"]),d(u,{url:s.typesUrl,valueKey:"name",name:"checklist_item_types",accessToken:s.accessToken,modelValue:e.checklist_item_type,"onUpdate:modelValue":t=>e.checklist_item_type=t,label:"checklist_item_types"},null,8,["url","accessToken","modelValue","onUpdate:modelValue"]),e.checklist_item_type==="task"?(a(),n(u,{key:0,url:s.statusUrl,valueKey:"name",name:"statuses",accessToken:s.accessToken,modelValue:e.status,"onUpdate:modelValue":t=>e.status=t,label:"statuses"},null,8,["url","accessToken","modelValue","onUpdate:modelValue"])):i("",!0),e.checklist_item_type==="rating"?g((a(),N("input",{key:1,type:"number","onUpdate:modelValue":t=>e.value=t,name:"value",step:"0.5",min:"0",max:"5",class:"form-control",placeholder:"Rating (0-5)"},null,8,q)),[[V,e.value]]):i("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(l,{key:2,value:e.sets,"onUpdate:value":t=>e.sets=t,name:"sets",label:"Sets"},null,8,["value","onUpdate:value"])):i("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(l,{key:3,value:e.reps,"onUpdate:value":t=>e.reps=t,name:"reps",label:"Reps"},null,8,["value","onUpdate:value"])):i("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(l,{key:4,value:e.weight,"onUpdate:value":t=>e.weight=t,name:"weight",label:"Weight"},null,8,["value","onUpdate:value"])):i("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(l,{key:5,value:e.unit,"onUpdate:value":t=>e.unit=t,name:"unit",label:"Unit"},null,8,["value","onUpdate:value"])):i("",!0),e.checklist_item_type==="weighted_exercise"?(a(),n(l,{key:6,value:e.rest,"onUpdate:value":t=>e.rest=t,name:"rest",label:"Rest (seconds)"},null,8,["value","onUpdate:value"])):i("",!0)]),_:2},1024)]),_:3},8,["record","endpoint","method","onSave","onDelete"])}const x=R(B,[["render",M]]);export{x as C};
